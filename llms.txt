# Welcome to the `propop` package

## Overview

The goal of `propop` is to create population projections using the
**cohort component method** (see e.g., [Preston, Guillot, and Heuveline,
2000](https://www.wiley.com/en-us/Demography%3A+Measuring+and+Modeling+Population+Processes-p-9781557864512);
[Statistik Aargau,
2025a](https://www.ag.ch/media/kanton-aargau/dfr/dokumente/statistik/statistische-daten/oeffentliche-statistik/01-bevoelkerung/kantonsdaten/bevoelkerungsprognosen/bev-lkerungsprojektion-technischerbegleitbericht-2025.pdf);
[Statistik Aargau,
2025b](https://www.ag.ch/media/kanton-aargau/dfr/dokumente/statistik/statistische-daten/oeffentliche-statistik/01-bevoelkerung/kantonsdaten/bevoelkerungsprognosen/bev-lkerungsprohektion-hauptbericht-2025.pdf)).
For a breakdown of the components, see [this
vignette](https://statistik-aargau.github.io/propop/articles/project_single_region.html).

The package was developed for use with [projection
scenarios](https://www.bfs.admin.ch/bfs/en/home/statistics/population/population-projections/national-projections.html)
from the Swiss Federal Statistical Office (FSO). The current scenarios
are available for the years 2024-2055. As starting population, you can
either use [population data from the
FSO](https://www.pxweb.bfs.admin.ch/pxweb) or your own population data.

`propop` uses the same calculation method as the FSO
([2020](https://github.com/statistik-aargau/propop-additional-resources/blob/358ffa280f3777af34d3ac4b2782c1171ed93beb/FSO_2020_Meth_scenarios%20cant.pdf);
only available in French) and therefore reveals almost identical results
(see vignette [Evaluate
projections](https://statistik-aargau.github.io/propop/articles/evaluate.html)).
The package can be used to project the development of different
**demographic groups** for different **scenarios** and at different
**spatial levels** (e.g., single canton or municipalities within a
canton).

While the package was primarily designed for use with FSO input data
(e.g., mortality rates), it should in principle also work for other
contexts (e.g., custom input data). However, it is important to provide
the required input data in the [specified
form](https://statistik-aargau.github.io/propop/articles/prepare_data.html).

## Installation

To install the current github version of the package, make sure you have
devtools installed and type:

``` r
devtools::install_github("statistik-aargau/propop")
```

## Vignettes

The package includes four vignettes.

- Vignette 1 shows how to
  [prepare](https://statistik-aargau.github.io/propop/articles/prepare_data.html)
  the FSO population data and parameters. (Users can of course use their
  own data and parameters).
- Vignette 2 illustrates how to run [population projections for a single
  region](https://statistik-aargau.github.io/propop/articles/project_single_region.html).
- Vignette 3 illustrates how to pepare and run [population projections
  for
  subregions](https://statistik-aargau.github.io/propop/articles/project_subregions.html).
- Vignette 4 shows [how to evaluate
  projections](https://statistik-aargau.github.io/propop/articles/evaluate.html)
  against benchmarks.

## Features, limitations, future plans

- [`propop::propop()`](https://statistik-aargau.github.io/propop/reference/propop.md)
  works with either two nationalities (usually Swiss vs.  non-Swiss
  nationals) or without distinguishing between nationalities.  
- However,
  [`propop::propop()`](https://statistik-aargau.github.io/propop/reference/propop.md)
  currently requires *1-year age classes* (0-100+) and two genders.  
- The FSO projections are only published in five-year intervals, the
  most recent ones being based on population records from 2023. `propop`
  enables you to run projections with more recent population records.
- This package was developed for use with *FSO parameters* (e.g.,
  mortality rate, or emigration rate). Most parameters are only
  available for cantons and the whole of Switzerland. If you wish to run
  projections at smaller scales (e.g., districts), you need to prepare
  the parameters for each spatial entity before running the projection.
  [This
  vignette](https://statistik-aargau.github.io/propop/articles/project_subregions.html)
  includes tips of how to prepare your input data.  
- Similarly, if you wish to adjust parameters (e.g., mortality rates
  that vary between subregions), you need to prepare the parameters
  accordingly.
- [`propop::propop()`](https://statistik-aargau.github.io/propop/reference/propop.md)offers
  the possibility to account for varying subregional migration patterns
  and migration between subregions. However, before using this feature,
  users must adjust or calculate the required parameters ([see this
  vignette](https://statistik-aargau.github.io/propop/articles/project_subregions.html)).
- Custom parameters (e.g., consideration of sub-cantonal spatial
  entities, adjustments to reflect regional differences, or addition of
  subregional migration parameter) can be passed through the
  `parameters` object to
  [`propop::propop()`](https://statistik-aargau.github.io/propop/reference/propop.md).
- The FSO uses additional *ex-post* adjustments to ensure that all the
  sums involving different cantons add up, which leads to some
  differences between the projections from the FSO and `propop`.
- There are also *possible future features* that could increase the
  accuracy of the projections. For example, considering the
  attractiveness of municipalities or planned housing developments could
  help to better explain why population growth varies between
  municipalities.

**If you are interested in contributing to these or other developments,
please get in touch with the package maintainer.**

## Quick example

To run
[`propop::propop()`](https://statistik-aargau.github.io/propop/reference/propop.md)
with the example data included in the package (canton of Aargau), use
the following code:

``` r
library(propop)
projection_canton_2030 <- propop(
parameters = fso_parameters,
year_first = 2024,
year_last = 2030,
population = fso_population,
subregional = FALSE,
binational = TRUE)
```

# Package index

## Prepare data

Functions for downloading and preparing data

- [`get_parameters()`](https://statistik-aargau.github.io/propop/reference/get_parameters.md)
  : Get projection parameters from FSO
- [`get_population()`](https://statistik-aargau.github.io/propop/reference/get_population.md)
  : Get population data from FSO

## Run projections

Functions for running population projections

- [`propop()`](https://statistik-aargau.github.io/propop/reference/propop.md)
  : Project population development

## Evaluate projections

Functions to evaluate projection results

- [`check_balance()`](https://statistik-aargau.github.io/propop/reference/check_balance.md)
  : Check if population equation components add up within one year
- [`prepare_evaluation()`](https://statistik-aargau.github.io/propop/reference/prepare_evaluation.md)
  : Prepare data for evaluation
- [`compute_measures()`](https://statistik-aargau.github.io/propop/reference/compute_measures.md)
  : Compute evaluation measures
- [`aggregate_measures()`](https://statistik-aargau.github.io/propop/reference/aggregate_measures.md)
  : Aggregate evaluation measures

## Distribute migration

Example for distributing international immigration

- [`calculate_shares()`](https://statistik-aargau.github.io/propop/reference/calculate_shares.md)
  : Calculate shares for distributing people among subregions

## Sample data

Sample data from the Federal Statistical Office

- [`fso_parameters`](https://statistik-aargau.github.io/propop/reference/fso_parameters.md)
  : Sample parameters to run population projection
- [`fso_population`](https://statistik-aargau.github.io/propop/reference/fso_population.md)
  : Sample population data from the Federal Statistical Office

## Deprecated functions

Functions are still operational but won’t be further maintained

- [`propop_legacy()`](https://statistik-aargau.github.io/propop/reference/propop_legacy.md)
  : Project population development
- [`project_raw()`](https://statistik-aargau.github.io/propop/reference/project_raw.md)
  : Project population development (raw results)

# Articles

### All vignettes

- [Evaluate
  projections](https://statistik-aargau.github.io/propop/articles/evaluate.md):
- [Prepare
  data](https://statistik-aargau.github.io/propop/articles/prepare_data.md):
- [Projections for a single
  region](https://statistik-aargau.github.io/propop/articles/project_single_region.md):
- [Projections for
  subregions](https://statistik-aargau.github.io/propop/articles/project_subregions.md):
