<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Prepare data • propop</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Inter-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data">
</head>
<body>
<p>








  pkgdown/extra.scss

  

  </p>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">propop</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><a class="dropdown-item" href="../articles/prepare_data.html">Prepare data</a></li>
    <li><a class="dropdown-item" href="../articles/project_single_region.html">Projections for a single region</a></li>
    <li><a class="dropdown-item" href="../articles/project_subregions.html">Projections for subregions</a></li>
    <li><a class="dropdown-item" href="../articles/evaluate.html">Evaluate projections</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statistik-aargau/propop/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistik-aargau/propop/blob/f-proj-tables2025-2055/vignettes/prepare_data.Rmd" class="external-link"><code>vignettes/prepare_data.Rmd</code></a></small>
      <div class="d-none name"><code>prepare_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>To run projections with <a href="https://statistik-aargau.github.io/propop">propop</a>, you need a starting
population and projection parameters. You can either use your own data
or download them from the Federal Statistical Office (FSO). This
vignette explains how to get the data from FSO. You’ll also learn how to
prepare the relevant information to run population projections
<a href="https://statistik-aargau.github.io/propop">propop</a>.</p>
<p><em>Note that some data are only available for certain administrative
levels.</em></p>
</div>
<div class="section level2">
<h2 id="required-data">Required data<a class="anchor" aria-label="anchor" href="#required-data"></a>
</h2>
<p>If you don’t have the information and data required to run
<code><a href="../reference/propop.html">propop::propop()</a></code> (or <code><a href="../reference/project_raw.html">propop::project_raw()</a></code>),
you can download most of the data from <a href="https://www.pxweb.bfs.admin.ch/pxweb" class="external-link">STAT-TAB</a>. More
specifically, the information from the following tables are needed:</p>
<table style="width:99%;" class="table">
<caption>Overview of required FSO tables (STAT-TAB)</caption>
<colgroup>
<col width="24%">
<col width="39%">
<col width="34%">
</colgroup>
<thead><tr class="header">
<th>Table ID</th>
<th>Parameters expressed as…</th>
<th>Variables required for projection</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>px- x-0104020000_101</td>
<td>number of people (<em>reference</em> scenario)</td>
<td><ul>
<li>Inter-cantonal immigration</li>
<li>Inter-cantonal emigration</li>
<li>International immigration</li>
<li>International emigration</li>
<li>end of year population size</li>
</ul></td>
</tr>
<tr class="even">
<td>px- x-0104020000_102</td>
<td>number of people (<em>high growth</em> scenario)</td>
<td><ul>
<li>same as 101</li>
</ul></td>
</tr>
<tr class="odd">
<td>px- x-0104020000_103</td>
<td>number of people (<em>low growth</em> scenario)</td>
<td><ul>
<li>same as 101</li>
</ul></td>
</tr>
<tr class="even">
<td>px- x-0104020000_109</td>
<td>rates / probabilities (five scenarios)</td>
<td><ul>
<li><p>Births per mother</p></li>
<li><p>Mortality</p></li>
<li><p>International emigration</p></li>
<li><p>Inter-cantonal emigration</p></li>
<li><p>Acquisition of Swiss citizenship</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>px -x-0104020000_106</td>
<td>share of newborns with Swiss nationality born to non-Swiss
mothers</td>
<td><ul>
<li><p>Live newborns</p></li>
<li><p>Live births by age and nationality of the mother (varies between
cantons)</p></li>
</ul></td>
</tr>
<tr class="even">
<td>Constant parameters <strong>not</strong> directly available from
STAT-TAB are provided as arguments</td>
<td></td>
<td><ul>
<li><p>Start (16) and end (50) of the fertile age of women</p></li>
<li><p>Proportion of newborns with female sex (100/205)</p></li>
</ul></td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="convenient-way-to-get-fso-data">Convenient way to get FSO data<a class="anchor" aria-label="anchor" href="#convenient-way-to-get-fso-data"></a>
</h2>
<p><a href="https://statistik-aargau.github.io/propop">propop</a> provides two convenience functions to download
data from the FSO. These are strongly based on the <code>BFS</code>
package and its documentation.</p>
<p>To get the <strong>starting population</strong> for a spatial unit,
you must use the spelling defined in the corresponding FSO table. The
entries in the FSO tables may contain special characters. The spelling
may also vary between FSO tables.</p>
<p><code><a href="https://felixluginbuhl.com/BFS/reference/bfs_get_metadata.html" class="external-link">BFS::bfs_get_metadata()</a></code> is helpful to identify the
required spelling(s).</p>
<p>Here’s an example of how to get the population for the canton of
Aargau:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statistik-aargau.github.io/propop">propop</a></span><span class="op">)</span> </span>
<span><span class="va">ag_population</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_population.html">get_population</a></span><span class="op">(</span></span>
<span>  number_fso <span class="op">=</span> <span class="st">"px-x-0102010000_101"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2023</span>, </span>
<span>  spatial_units <span class="op">=</span> <span class="st">"- Aargau"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Get the parameters for a sample canton (mind using the same spelling
as in the FSO tables; see comment above):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ag_parameters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_parameters.html">get_parameters</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2024</span>,</span>
<span>  year_last <span class="op">=</span> <span class="fl">2026</span>,</span>
<span>  spatial_units <span class="op">=</span> <span class="st">"Aargau"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The projection can be run as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select reference scenario</span></span>
<span><span class="va">ag_parameters_ref</span> <span class="op">&lt;-</span> <span class="va">ag_parameters</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scen</span> <span class="op">==</span> <span class="st">"reference"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/propop.html">propop</a></span><span class="op">(</span></span>
<span>  parameters <span class="op">=</span> <span class="va">ag_parameters_ref</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2024</span>,</span>
<span>  year_last <span class="op">=</span> <span class="fl">2026</span>,</span>
<span>  age_groups <span class="op">=</span> <span class="fl">101</span>,</span>
<span>  fert_first <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  fert_last <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  share_born_female <span class="op">=</span> <span class="fl">100</span> <span class="op">/</span> <span class="fl">205</span>,</span>
<span>  population <span class="op">=</span> <span class="va">ag_population</span>,</span>
<span>  subregional <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  binational <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Note of caution:</strong> As long as the FSO’s API interface
and the underlying data structure remain stable, the functions will
work. However, changes in the API are likely to break the functions.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Norah Efosa, Adrian Gadient, Tina Cornioley, Jan Wunder, Niklas Haffert, Statistik Aargau.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  
</body>
</html>
